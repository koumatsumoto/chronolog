# 開発手順

本プロジェクトの開発・運用における標準的な手順をまとめます。

## セットアップ

1. Node.jsがインストールされていることを確認してください（バージョン22以上）。

```bash
node --version
```

バージョンが22未満の場合は、最新版のNode.jsをインストールしてください。

2. 必要なパッケージをインストールします。

```bash
npm install
```

## 開発フロー

### 1. コードフォーマット

プロジェクト内の全ファイルをPrettierのルールで自動整形します。

```bash
npm run fmt
```

整形されていないファイルがないかを確認する場合は、以下のコマンドを使用します（自動修正は行いません。差分があればエラー終了します）。

```bash
npm run fmt:check
```

### 2. 静的解析・リント

ESLintによる静的解析を実行し、コード品質を担保します。

```bash
npm run lint
```

### 3. テスト

ユニットテストを実行し、機能が正しく動作することを確認します。

```bash
npm run test
```

### 4. ビルド

本番用ビルドが正常に完了することを確認します。

```bash
npm run build
```

#### Next.js スタンドアロン/エクスポートビルド設定

- `next.config.ts` で `output: "export"` を指定し、静的エクスポート（standalone build）に対応しています。
- GitHub Pages での公開時は `basePath` が `/chronolog` となるように設定されています。
- 本番環境では `process.env.NODE_ENV === "production"` の場合に `basePath` が有効になります。

### 5. 実装後の一括確認

実装後は以下を実行してコードが適切であることを確認してください。

- `npm run fmt:check` でフォーマットエラーがないことを確認すること（自動修正は行いません）
- `npm run lint` でリントが通ること
- `npm run test` でテストが成功すること
- `npm run build` でビルドできること

これら4つのコマンドをまとめて実行するには、以下のコマンドを使用します。

```bash
npm run ci
```

このコマンドで全てのチェックが一度に実行され、コードが適切であることを確認できます。
